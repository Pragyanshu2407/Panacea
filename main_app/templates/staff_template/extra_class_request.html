{% extends "main_app/base.html" %}
{% block content %}
<h4>{{ page_title }}</h4>
<form method="post" class="mb-3">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit" class="btn btn-primary">Submit Request</button>
  <a class="btn btn-secondary" href="{% url 'staff_available_extra_slots' %}">View Available Slots</a>
  {% if messages %}
    <div class="mt-2">{% for m in messages %}<div class="alert alert-{{ m.tags }}">{{ m }}</div>{% endfor %}</div>
  {% endif %}
</form>
<hr/>
<h5>My Requests</h5>
<table class="table table-sm">
  <thead><tr><th>Subject</th><th>Course</th><th>Session</th><th>Preferred</th><th>Duration</th><th>Status</th><th>Created</th></tr></thead>
  <tbody>
    {% for r in requests %}
    <tr>
      <td>{{ r.subject }}</td>
      <td>{{ r.course }}</td>
      <td>{{ r.session }}</td>
      <td>{% if r.preferred_day %}{{ r.preferred_day }} P{{ r.preferred_period }}{% else %}-{% endif %}</td>
      <td>{{ r.duration_periods }}</td>
      <td>{{ r.get_status_display }}</td>
      <td>{{ r.created_at }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="7" class="text-muted">No requests yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}